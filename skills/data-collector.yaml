---
# í•œêµ­ì—¬í–‰ ë°ì´í„° ìˆ˜ì§‘ Skill
command: "/data-collector"
category: "Data & Analysis"
purpose: "í•œêµ­ ê´€ê´‘ì§€, ë§›ì§‘, ìˆ™ì†Œ ë°ì´í„° ìë™ ìˆ˜ì§‘ ë° JSON ìƒì„±"
wave-enabled: true
performance-profile: "complex"

# Skill ë©”íƒ€ë°ì´í„°
metadata:
  version: "1.0.0"
  author: "SuperClaude Korea Travel Team"
  last_updated: "2026-02-14"
  dependencies:
    - requests: "^2.31.0"
    - beautifulsoup4: "^4.12.0"

# ìë™ í™œì„±í™” ì¡°ê±´
auto_activation:
  keywords:
    - "ë°ì´í„° ìˆ˜ì§‘"
    - "ê´€ê´‘ì§€ ì¶”ê°€"
    - "ë§›ì§‘ ì •ë³´"
    - "collect data"
    - "í¬ë¡¤ë§"
  file_patterns:
    - "*-data.json"
    - "/data/*.json"
  operations:
    - data_collection
    - web_scraping
  confidence_threshold: 0.80

# í˜ë¥´ì†Œë‚˜ ë° MCP ì„¤ì •
auto_persona:
  - analyzer       # ë°ì´í„° ë¶„ì„
  - scribe         # ë°ì´í„° ì •ë¦¬ ë° ë¬¸ì„œí™”

mcp_servers:
  primary: Sequential  # ì²´ê³„ì  ë°ì´í„° ìˆ˜ì§‘
  secondary: Context7  # API ë¬¸ì„œ ì°¸ì¡°

# ì‚¬ìš© ê°€ëŠ¥í•œ ë„êµ¬
tools:
  - WebFetch       # ì›¹ ë°ì´í„° ìˆ˜ì§‘
  - WebSearch      # ê²€ìƒ‰ ì—”ì§„ í™œìš©
  - Write          # JSON íŒŒì¼ ìƒì„±
  - Read           # ê¸°ì¡´ ë°ì´í„° ì½ê¸°
  - Edit           # ë°ì´í„° ì—…ë°ì´íŠ¸
  - Bash           # ì´ë¯¸ì§€ ë‹¤ìš´ë¡œë“œ, íŒŒì¼ ì²˜ë¦¬
  - Grep           # ë°ì´í„° ê²€ìƒ‰

# Flags
default_flags:
  - --seq          # Sequential MCP í™œì„±í™”
  - --validate     # ë°ì´í„° ê²€ì¦ í™œì„±í™”
  - --uc           # ì••ì¶• ëª¨ë“œ

# Arguments ì •ì˜
arguments:
  - name: type
    type: string
    required: true
    description: "ìˆ˜ì§‘í•  ë°ì´í„° íƒ€ì…"
    options:
      - attractions   # ê´€ê´‘ì§€
      - restaurants   # ë§›ì§‘
      - hotels        # ìˆ™ì†Œ
      - all           # ì „ì²´

  - name: region
    type: string
    required: false
    default: "seoul"
    description: "ìˆ˜ì§‘ ëŒ€ìƒ ì§€ì—­"
    options:
      - seoul
      - busan
      - jeju
      - gyeongju
      - incheon
      - gangneung
      - jeonju
      - sokcho

  - name: count
    type: integer
    required: false
    default: 10
    description: "ìˆ˜ì§‘í•  ë°ì´í„° ê°œìˆ˜"
    range: [1, 100]

  - name: keyword
    type: string
    required: false
    description: "ê²€ìƒ‰ í‚¤ì›Œë“œ (ì˜ˆ: 'ë¶€ì‚° í•´ìš´ëŒ€ ë§›ì§‘')"

  - name: auto-geocode
    type: boolean
    required: false
    default: true
    description: "ì£¼ì†Œ â†’ ìœ„ë„/ê²½ë„ ìë™ ë³€í™˜"

  - name: download-images
    type: boolean
    required: false
    default: false
    description: "ì´ë¯¸ì§€ ìë™ ë‹¤ìš´ë¡œë“œ"

  - name: validate
    type: boolean
    required: false
    default: true
    description: "ë°ì´í„° ê²€ì¦ í™œì„±í™”"

  - name: append
    type: boolean
    required: false
    default: false
    description: "ê¸°ì¡´ ë°ì´í„°ì— ì¶”ê°€ (ë®ì–´ì“°ì§€ ì•ŠìŒ)"

  - name: output
    type: string
    required: false
    default: "data/korea-travel-data.json"
    description: "ì¶œë ¥ íŒŒì¼ ê²½ë¡œ"

# ì‹¤í–‰ ì›Œí¬í”Œë¡œìš°
workflow:
  steps:
    - step: 1
      name: "ë°ì´í„° ì†ŒìŠ¤ ì‹ë³„"
      description: "ìˆ˜ì§‘ ëŒ€ìƒ ì›¹ì‚¬ì´íŠ¸ ë° API í™•ì¸"
      operations:
        - identify_sources:
            priority:
              - "í•œêµ­ê´€ê´‘ê³µì‚¬ Tour API"
              - "ë„¤ì´ë²„ ì§€ì—­ ê²€ìƒ‰ API"
              - "ì¹´ì¹´ì˜¤ ë¡œì»¬ API"
              - "ê³µê³µë°ì´í„°í¬í„¸"
        - check_api_availability:
            timeout: 5000
        - fallback_to_web_search: true

    - step: 2
      name: "ë°ì´í„° ìˆ˜ì§‘"
      description: "ì›¹ ìŠ¤í¬ë˜í•‘ ë˜ëŠ” API í˜¸ì¶œ"
      parallel: true
      operations:
        - action: fetch_from_api
          api: "korea_tour_api"
          parameters:
            type: "{{ type }}"
            region: "{{ region }}"
            count: "{{ count }}"

        - action: web_search
          query: "{{ keyword || region + ' ' + type }}"
          max_results: "{{ count }}"

    - step: 3
      name: "ë°ì´í„° ì •ì œ"
      description: "ìˆ˜ì§‘í•œ ë°ì´í„° í‘œì¤€í™”"
      operations:
        - normalize_place_names:
            format: "í•œê¸€ëª… (English Name, ä¸­æ–‡å)"
        - remove_duplicates:
            key_fields: ["name", "latitude", "longitude"]
        - validate_coordinates:
            bounds:
              latitude: [33.0, 38.5]
              longitude: [124.0, 132.0]

    - step: 4
      name: "ì£¼ì†Œ â†’ ì¢Œí‘œ ë³€í™˜"
      description: "Geocoding ìˆ˜í–‰"
      condition: "{{ auto_geocode }}"
      operations:
        - action: geocode_addresses
          api: "kakao_local"
          fallback: "google_geocoding"
          batch_size: 10
          rate_limit: 500  # ms

    - step: 5
      name: "ì´ë¯¸ì§€ ìˆ˜ì§‘"
      description: "ëŒ€í‘œ ì´ë¯¸ì§€ ë‹¤ìš´ë¡œë“œ ë° ìµœì í™”"
      condition: "{{ download_images }}"
      operations:
        - action: download_images
          source: "web_search"
          save_to: "images/{{ type }}/"
          optimize:
            format: "webp"
            max_size: 200  # KB
            dimensions: [800, 600]

    - step: 6
      name: "ë°ì´í„° ê²€ì¦"
      description: "JSON ìŠ¤í‚¤ë§ˆ ê²€ì¦"
      condition: "{{ validate }}"
      operations:
        - action: validate_schema
          schema: "korea-travel-schema.json"
        - check_required_fields:
            - name
            - latitude
            - longitude
            - type
        - validate_price_format: true

    - step: 7
      name: "ë°ì´í„° ì €ì¥"
      description: "JSON íŒŒì¼ ìƒì„±/ì—…ë°ì´íŠ¸"
      operations:
        - action: merge_or_create
          mode: "{{ 'append' if append else 'overwrite' }}"
          file: "{{ output }}"
        - pretty_print: true
        - backup_existing: true

# ë°ì´í„° ì†ŒìŠ¤ ì„¤ì •
data_sources:
  korea_tour_api:
    name: "í•œêµ­ê´€ê´‘ê³µì‚¬ Tour API"
    base_url: "http://api.visitkorea.or.kr/openapi/service/rest/KorService"
    endpoints:
      attractions: "areaBasedList"
      restaurants: "searchStay"
    auth_required: true
    rate_limit: 1000  # requests per day

  kakao_local:
    name: "ì¹´ì¹´ì˜¤ ë¡œì»¬ API"
    base_url: "https://dapi.kakao.com/v2/local"
    endpoints:
      search: "search/keyword.json"
      geocode: "geo/coord2address.json"
    auth_required: true
    rate_limit: 100000  # requests per day

  naver_local:
    name: "ë„¤ì´ë²„ ì§€ì—­ ê²€ìƒ‰ API"
    base_url: "https://openapi.naver.com/v1/search"
    endpoints:
      local: "local.json"
    auth_required: true
    rate_limit: 25000  # requests per day

  web_search:
    name: "ì›¹ ê²€ìƒ‰ (ë°±ì—…)"
    sources:
      - "visitkorea.or.kr"
      - "tripadvisor.co.kr"
      - "blog.naver.com"
    scraping_rules:
      allowed: true
      respect_robots_txt: true
      rate_limit: 1000  # ms between requests

# JSON ìŠ¤í‚¤ë§ˆ
json_schema:
  type: "object"
  required:
    - name
    - latitude
    - longitude
    - type
  properties:
    name:
      type: "string"
      pattern: "^.+\\s*\\([^)]+\\).*$"
      description: "í•œê¸€ëª… (English Name, ä¸­æ–‡å) í˜•ì‹"

    latitude:
      type: "number"
      minimum: 33.0
      maximum: 38.5
      description: "ìœ„ë„ (í•œêµ­ ì˜ì—­)"

    longitude:
      type: "number"
      minimum: 124.0
      maximum: 132.0
      description: "ê²½ë„ (í•œêµ­ ì˜ì—­)"

    address:
      type: "string"
      description: "ì „ì²´ ì£¼ì†Œ"

    description:
      type: "string"
      maxLength: 200
      description: "ì¥ì†Œ ì„¤ëª… (200ì ì´ë‚´)"

    features:
      type: "array"
      items:
        type: "string"
      maxItems: 5
      description: "íŠ¹ì§• íƒœê·¸ (ìµœëŒ€ 5ê°œ)"

    price:
      type: "string"
      pattern: "^\\d+$"
      description: "ê°€ê²© (ì› ë‹¨ìœ„, ë¬¸ìì—´)"

    type:
      type: "string"
      enum:
        - "attractions"
        - "restaurants"
        - "hotels"
        - "airports"
      description: "ì¥ì†Œ íƒ€ì…"

    menu:
      type: "array"
      items:
        type: "string"
      description: "ë©”ë‰´ (restaurantsë§Œ í•´ë‹¹)"

    image:
      type: "string"
      pattern: "^images/.+\\.(jpg|jpeg|png|webp)$"
      description: "ì´ë¯¸ì§€ ê²½ë¡œ"

# ì§€ì—­ë³„ ê²€ìƒ‰ í‚¤ì›Œë“œ ë§¤í•‘
region_keywords:
  seoul:
    attractions:
      - "ê²½ë³µê¶"
      - "ë‚¨ì‚°íƒ€ì›Œ"
      - "ë¶ì´Œí•œì˜¥ë§ˆì„"
      - "ëª…ë™"
      - "ì¸ì‚¬ë™"
    restaurants:
      - "ê´‘ì¥ì‹œì¥"
      - "ì¢…ë¡œ ë§›ì§‘"
      - "ê°•ë‚¨ ë§›ì§‘"

  busan:
    attractions:
      - "í•´ìš´ëŒ€"
      - "ê°ì²œë¬¸í™”ë§ˆì„"
      - "íƒœì¢…ëŒ€"
      - "ê´‘ì•ˆë¦¬"
    restaurants:
      - "ìê°ˆì¹˜ì‹œì¥"
      - "í•´ìš´ëŒ€ ë§›ì§‘"
      - "ê´‘ì•ˆë¦¬ íšŒ"

  jeju:
    attractions:
      - "í•œë¼ì‚°"
      - "ì„±ì‚°ì¼ì¶œë´‰"
      - "ìš°ë„"
      - "í˜‘ì¬í•´ìˆ˜ìš•ì¥"
    restaurants:
      - "ì œì£¼ í‘ë¼ì§€"
      - "í•´ì‚°ë¬¼ ë§›ì§‘"
      - "ì œì£¼ ì¹´í˜"

# ë°ì´í„° ì •ì œ ê·œì¹™
data_cleaning:
  name_normalization:
    - remove_emoji: true
    - trim_whitespace: true
    - fix_encoding: true
    - standardize_parentheses: "()"  # () í˜•ì‹ìœ¼ë¡œ í†µì¼

  address_normalization:
    - remove_postcode: true
    - standardize_format: "ì‹œ/ë„ ì‹œ/êµ°/êµ¬ ìƒì„¸ì£¼ì†Œ"
    - remove_building_floor: false

  price_normalization:
    - remove_currency_symbol: true
    - convert_to_string: true
    - remove_decimal: true
    - handle_range: "use_minimum"  # "10000-15000" â†’ "10000"

  feature_tags:
    max_count: 5
    allowed_chars: "ê°€-í£a-zA-Z0-9 "
    max_length: 15

# Geocoding ì„¤ì •
geocoding:
  provider: "kakao"
  fallback: "google"
  cache_enabled: true
  cache_ttl: 86400  # 24 hours

  error_handling:
    on_failure: "use_approximate"
    max_retries: 3
    retry_delay: 1000  # ms

  precision:
    decimal_places: 4

  validation:
    check_bounds: true
    check_reverse_geocode: false

# ì´ë¯¸ì§€ ì²˜ë¦¬ ì„¤ì •
image_processing:
  download:
    user_agent: "Mozilla/5.0 (compatible; KoreaTravelBot/1.0)"
    timeout: 10000  # ms
    max_file_size: 5  # MB

  optimization:
    format: "webp"
    quality: 85
    max_width: 800
    max_height: 600
    strip_metadata: true

  naming:
    pattern: "{region}-{type}-{index}.webp"
    lowercase: true
    replace_spaces: "-"

# ë°ì´í„° ê²€ì¦ ê·œì¹™
validation_rules:
  required_fields:
    - name: "ì´ë¦„ì€ í•„ìˆ˜ì…ë‹ˆë‹¤"
    - latitude: "ìœ„ë„ëŠ” í•„ìˆ˜ì…ë‹ˆë‹¤"
    - longitude: "ê²½ë„ëŠ” í•„ìˆ˜ì…ë‹ˆë‹¤"
    - type: "íƒ€ì…ì€ í•„ìˆ˜ì…ë‹ˆë‹¤"

  coordinate_validation:
    latitude_range: [33.0, 38.5]
    longitude_range: [124.0, 132.0]
    precision: 4

  name_validation:
    min_length: 2
    max_length: 100
    require_parentheses: true

  price_validation:
    numeric_only: true
    min_value: 0
    max_value: 1000000

  duplicate_detection:
    check_fields:
      - name
      - coordinates  # lat+lng ì¡°í•©
    tolerance:
      coordinate_difference: 0.001  # ~100m

# ì¶œë ¥ í˜•ì‹
output:
  format: "json"
  pretty_print: true
  indent: 2
  encoding: "utf-8"
  ensure_ascii: false

  structure:
    version: "1.0"
    metadata:
      generated_at: "{{ timestamp }}"
      source: "{{ data_source }}"
      region: "{{ region }}"
      count: "{{ actual_count }}"
    data:
      attractions: []
      restaurants: []
      hotels: []

  backup:
    enabled: true
    pattern: "{{ filename }}.backup.{{ timestamp }}.json"
    max_backups: 5

# ì„±ê³µ ë©”ì‹œì§€
success_message: |
  âœ… ë°ì´í„° ìˆ˜ì§‘ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤!

  ğŸ“Š ìˆ˜ì§‘ ê²°ê³¼:
  - ì´ {{ count }}ê°œì˜ {{ type }} ë°ì´í„° ìˆ˜ì§‘
  - ì§€ì—­: {{ region }}
  - ì €ì¥ ìœ„ì¹˜: {{ output }}

  ğŸ“ ìƒ˜í”Œ ë°ì´í„°:
  {{ sample_entries }}

  ğŸ” ë°ì´í„° ê²€ì¦:
  - ìŠ¤í‚¤ë§ˆ ê²€ì¦: {{ validation_status }}
  - ì¢Œí‘œ ìœ íš¨ì„±: {{ coordinate_validation }}
  - ì¤‘ë³µ ì œê±°: {{ duplicates_removed }}ê°œ

  ğŸ“ ë‹¤ìŒ ë‹¨ê³„:
  1. ë°ì´í„° íŒŒì¼ í™•ì¸: {{ output }}
  2. ì´ë¯¸ì§€ í™•ì¸ (ë‹¤ìš´ë¡œë“œí•œ ê²½ìš°): images/{{ type }}/
  3. /map-designerë¡œ ì§€ë„ì— í‘œì‹œ

# ì—ëŸ¬ ì²˜ë¦¬
error_handling:
  - condition: "api_unavailable"
    message: "API ì ‘ê·¼ ë¶ˆê°€. ì›¹ ê²€ìƒ‰ìœ¼ë¡œ ì „í™˜í•©ë‹ˆë‹¤."
    action: "fallback_to_web_search"

  - condition: "geocoding_failed"
    message: "ì£¼ì†Œ ë³€í™˜ ì‹¤íŒ¨. ìˆ˜ë™ ì…ë ¥ì´ í•„ìš”í•©ë‹ˆë‹¤."
    action: "skip_entry"
    log: true

  - condition: "invalid_data"
    message: "ìœ íš¨í•˜ì§€ ì•Šì€ ë°ì´í„°ê°€ ê°ì§€ë˜ì—ˆìŠµë‹ˆë‹¤."
    action: "show_validation_errors"

  - condition: "duplicate_detected"
    message: "ì¤‘ë³µëœ ë°ì´í„°ê°€ {{ count }}ê°œ ë°œê²¬ë˜ì—ˆìŠµë‹ˆë‹¤."
    action: "remove_duplicates"

  - condition: "quota_exceeded"
    message: "API í• ë‹¹ëŸ‰ ì´ˆê³¼. ë‚´ì¼ ë‹¤ì‹œ ì‹œë„í•˜ì„¸ìš”."
    action: "stop_collection"

# ì„±ëŠ¥ ë©”íŠ¸ë¦­
performance:
  expected_duration:
    small: "30s-1m"     # count <= 10
    medium: "1m-3m"     # count <= 50
    large: "3m-10m"     # count > 50
  token_budget: "15K"
  rate_limiting: true
  cache_strategy: "aggressive"

# ì˜ˆì œ ì‚¬ìš©ë²•
examples:
  - description: "ì„œìš¸ ê´€ê´‘ì§€ 20ê°œ ìˆ˜ì§‘"
    command: "/data-collector --type attractions --region seoul --count 20"

  - description: "ë¶€ì‚° ë§›ì§‘ ê²€ìƒ‰ (í‚¤ì›Œë“œ ê¸°ë°˜)"
    command: "/data-collector --type restaurants --keyword 'ë¶€ì‚° í•´ìš´ëŒ€ ë§›ì§‘' --auto-geocode"

  - description: "ì œì£¼ ìˆ™ì†Œ ìˆ˜ì§‘ (ì´ë¯¸ì§€ í¬í•¨)"
    command: "/data-collector --type hotels --region jeju --count 10 --download-images"

  - description: "ê¸°ì¡´ ë°ì´í„°ì— ì¶”ê°€"
    command: "/data-collector --type attractions --region gyeongju --append"

  - description: "ì „ì²´ ë°ì´í„° ìˆ˜ì§‘"
    command: "/data-collector --type all --region seoul --count 15"
